#!/bin/bash

if [[ $# -ne 1 ]]
then
    echo -e "Usage: change_password <new_password>\n"
    exit 2
fi

if [[ $(id -u) -ne 0 ]]
then
    echo -e "Must be root to change root password!\n"
    exit 1
fi





echo -e "$1\n$1" | passwd > /tmp/passwd.stdout 2> /tmp/passwd.stderr


            if [ -f /etc/turtle/set_pass ]
            then
                rm /etc/turtle/set_pass
            fi

$new_password = $argv[1];

if (trim($new_password) != "") {

    echo "Password changed.\n\n";

    if (file_exists("/etc/turtle/set_pass")) {
        unlink("/etc/turtle/set_pass");
    }
    exit(1);


} else {
    die("Password cannot be blank.\n\n");
    exit(0);
}
